<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>产品中心 - CYBERBEANS</title>
    <meta name="description" content="CYBERBEANS产品中心 - 专业特斯拉配件，智能杯架、高效滤芯、运动挡泥板、全包围脚垫等">
    
    <!-- Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    
    <!-- Google Fonts -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+SC:wght@300;400;500;700;900&family=ZCOOL+KuaiLe&display=swap" rel="stylesheet">
    
    <!-- Animation Libraries -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/animejs/3.2.1/anime.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/matter-js/0.19.0/matter.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/p5.js/1.7.0/p5.min.js"></script>
    
    <!-- Custom Styles -->
    <style>
        :root {
            --primary-dark: #1a1a1a;
            --electric-blue: #00d4ff;
            --titanium-silver: #c0c0c0;
            --pure-black: #000000;
        }
        
        * {
            font-family: 'Noto Sans SC', sans-serif;
        }
        
        .font-display {
            font-family: 'ZCOOL KuaiLe', cursive;
        }
        
        body {
            background: var(--pure-black);
            color: white;
            overflow-x: hidden;
        }
        
        .gradient-text {
            background: linear-gradient(135deg, var(--electric-blue), var(--titanium-silver));
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }
        
        .glow-effect {
            box-shadow: 0 0 20px rgba(0, 212, 255, 0.3);
        }
        
        .card-hover {
            transition: all 0.3s ease;
        }
        
        .card-hover:hover {
            transform: translateY(-8px) scale(1.02);
            box-shadow: 0 20px 40px rgba(0, 212, 255, 0.2);
        }
        
        .nav-blur {
            backdrop-filter: blur(10px);
            background: rgba(0, 0, 0, 0.8);
        }
        
        .filter-active {
            background: var(--electric-blue) !important;
            color: white !important;
        }
        
        .price-range-slider {
            -webkit-appearance: none;
            appearance: none;
            height: 4px;
            background: #374151;
            outline: none;
            border-radius: 2px;
        }
        
        .price-range-slider::-webkit-slider-thumb {
            -webkit-appearance: none;
            appearance: none;
            width: 20px;
            height: 20px;
            background: var(--electric-blue);
            cursor: pointer;
            border-radius: 50%;
        }
        
        .price-range-slider::-moz-range-thumb {
            width: 20px;
            height: 20px;
            background: var(--electric-blue);
            cursor: pointer;
            border-radius: 50%;
            border: none;
        }
        
        .compare-table {
            max-height: 400px;
            overflow-y: auto;
        }
        
        .product-card {
            opacity: 0;
        }
        
        #particles-container {
            pointer-events: none;
        }
    </style>
</head>
<body>
    <!-- Particles Container -->
    <div id="particles-container"></div>
    
    <!-- Navigation -->
    <nav class="fixed top-0 w-full z-50 nav-blur">
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
            <div class="flex items-center justify-between h-16">
                <!-- Logo -->
                <div class="flex items-center space-x-3">
                    <div class="w-10 h-10 bg-gradient-to-br from-blue-400 to-blue-600 rounded-lg flex items-center justify-center glow-effect">
                        <span class="text-white font-bold text-lg">CB</span>
                    </div>
                    <span class="text-2xl font-bold gradient-text font-display">CYBERBEANS</span>
                </div>
                
                <!-- Desktop Navigation -->
                <div class="hidden md:flex items-center space-x-8">
                    <a href="index.html" class="text-gray-300 hover:text-blue-400 transition-colors font-medium">首页</a>
                    <a href="products.html" class="text-white hover:text-blue-400 transition-colors font-medium">产品中心</a>
                    <a href="about.html" class="text-gray-300 hover:text-blue-400 transition-colors font-medium">关于我们</a>
                    <a href="contact.html" class="text-gray-300 hover:text-blue-400 transition-colors font-medium">联系我们</a>
                    
                    <!-- Cart Icon -->
                    <div class="relative">
                        <button id="cart-icon" class="relative p-2 text-gray-300 hover:text-white transition-colors">
                            <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 3h2l.4 2M7 13h10l4-8H5.4m0 0L7 13m0 0l-1.5 6M7 13l-1.5 6m0 0h9m-9 0h9"></path>
                            </svg>
                            <span id="cart-count" class="absolute -top-1 -right-1 bg-blue-500 text-white text-xs rounded-full w-5 h-5 flex items-center justify-center hidden">0</span>
                        </button>
                    </div>
                </div>
                
                <!-- Mobile Menu Button -->
                <div class="md:hidden">
                    <button id="mobile-menu-btn" class="text-gray-300 hover:text-white">
                        <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6h16M4 12h16M4 18h16"></path>
                        </svg>
                    </button>
                </div>
            </div>
        </div>
        
        <!-- Mobile Menu -->
        <div id="mobile-menu" class="hidden md:hidden bg-black bg-opacity-90">
            <div class="px-2 pt-2 pb-3 space-y-1">
                <a href="index.html" class="block px-3 py-2 text-gray-300 hover:text-blue-400">首页</a>
                <a href="products.html" class="block px-3 py-2 text-white hover:text-blue-400">产品中心</a>
                <a href="about.html" class="block px-3 py-2 text-gray-300 hover:text-blue-400">关于我们</a>
                <a href="contact.html" class="block px-3 py-2 text-gray-300 hover:text-blue-400">联系我们</a>
            </div>
        </div>
    </nav>
    
    <!-- Page Header -->
    <section class="pt-24 pb-12 bg-gradient-to-b from-black to-gray-900">
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
            <div class="text-center">
                <h1 class="text-5xl font-bold mb-4">
                    <span class="gradient-text font-display">产品中心</span>
                </h1>
                <p class="text-xl text-gray-300">为您的特斯拉选择最适合的配件</p>
            </div>
        </div>
    </section>
    
    <!-- Main Content -->
    <section class="py-12">
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
            <div class="flex flex-col lg:flex-row gap-8">
                <!-- Sidebar Filters -->
                <div class="lg:w-1/4">
                    <div class="bg-gray-800 rounded-2xl p-6 sticky top-24">
                        <h3 class="text-xl font-semibold mb-6 text-white">筛选条件</h3>
                        
                        <!-- Category Filter -->
                        <div class="mb-8">
                            <h4 class="text-lg font-medium mb-4 text-gray-300">产品类别</h4>
                            <div class="space-y-3">
                                <label class="flex items-center">
                                    <input type="checkbox" class="category-filter mr-3 text-blue-500" value="all" checked>
                                    <span class="text-gray-300">全部产品</span>
                                </label>
                                <label class="flex items-center">
                                    <input type="checkbox" class="category-filter mr-3 text-blue-500" value="interior">
                                    <span class="text-gray-300">内饰配件</span>
                                </label>
                                <label class="flex items-center">
                                    <input type="checkbox" class="category-filter mr-3 text-blue-500" value="filter">
                                    <span class="text-gray-300">空调滤芯</span>
                                </label>
                                <label class="flex items-center">
                                    <input type="checkbox" class="category-filter mr-3 text-blue-500" value="exterior">
                                    <span class="text-gray-300">外观配件</span>
                                </label>
                            </div>
                        </div>
                        
                        <!-- Model Filter -->
                        <div class="mb-8">
                            <h4 class="text-lg font-medium mb-4 text-gray-300">适配车型</h4>
                            <div class="space-y-3">
                                <label class="flex items-center">
                                    <input type="checkbox" class="model-filter mr-3 text-blue-500" value="model3">
                                    <span class="text-gray-300">Model 3</span>
                                </label>
                                <label class="flex items-center">
                                    <input type="checkbox" class="model-filter mr-3 text-blue-500" value="modely">
                                    <span class="text-gray-300">Model Y</span>
                                </label>
                                <label class="flex items-center">
                                    <input type="checkbox" class="model-filter mr-3 text-blue-500" value="models">
                                    <span class="text-gray-300">Model S</span>
                                </label>
                                <label class="flex items-center">
                                    <input type="checkbox" class="model-filter mr-3 text-blue-500" value="modelx">
                                    <span class="text-gray-300">Model X</span>
                                </label>
                            </div>
                        </div>
                        
                        <!-- Price Range -->
                        <div class="mb-8">
                            <h4 class="text-lg font-medium mb-4 text-gray-300">价格区间</h4>
                            <div class="px-2">
                                <input type="range" id="price-range" class="price-range-slider w-full" min="0" max="1000" value="500">
                                <div class="flex justify-between text-sm text-gray-400 mt-2">
                                    <span>¥0</span>
                                    <span id="price-value">¥500</span>
                                    <span>¥1000+</span>
                                </div>
                            </div>
                        </div>
                        
                        <!-- Material Filter -->
                        <div class="mb-8">
                            <h4 class="text-lg font-medium mb-4 text-gray-300">材质类型</h4>
                            <div class="space-y-3">
                                <label class="flex items-center">
                                    <input type="checkbox" class="material-filter mr-3 text-blue-500" value="tpe">
                                    <span class="text-gray-300">TPE材质</span>
                                </label>
                                <label class="flex items-center">
                                    <input type="checkbox" class="material-filter mr-3 text-blue-500" value="carbon">
                                    <span class="text-gray-300">碳纤维</span>
                                </label>
                                <label class="flex items-center">
                                    <input type="checkbox" class="material-filter mr-3 text-blue-500" value="abs">
                                    <span class="text-gray-300">ABS塑料</span>
                                </label>
                                <label class="flex items-center">
                                    <input type="checkbox" class="material-filter mr-3 text-blue-500" value="aluminum">
                                    <span class="text-gray-300">铝合金</span>
                                </label>
                            </div>
                        </div>
                        
                        <!-- Reset Button -->
                        <button id="reset-filters" class="w-full bg-gray-700 hover:bg-gray-600 text-white py-2 px-4 rounded-lg transition-all duration-300">
                            重置筛选
                        </button>
                    </div>
                </div>
                
                <!-- Products Grid -->
                <div class="lg:w-3/4">
                    <!-- Sort and View Options -->
                    <div class="flex items-center justify-between mb-8">
                        <div class="flex items-center space-x-4">
                            <span class="text-gray-300">排序方式:</span>
                            <select id="sort-select" class="bg-gray-800 text-white px-4 py-2 rounded-lg border border-gray-600 focus:border-blue-400 focus:outline-none">
                                <option value="default">默认排序</option>
                                <option value="price-low">价格从低到高</option>
                                <option value="price-high">价格从高到低</option>
                                <option value="rating">评分最高</option>
                                <option value="newest">最新产品</option>
                            </select>
                        </div>
                        
                        <div class="flex items-center space-x-2">
                            <button id="grid-view" class="p-2 bg-blue-500 text-white rounded-lg">
                                <svg class="w-5 h-5" fill="currentColor" viewBox="0 0 20 20">
                                    <path d="M5 3a2 2 0 00-2 2v2a2 2 0 002 2h2a2 2 0 002-2V5a2 2 0 00-2-2H5zM5 11a2 2 0 00-2 2v2a2 2 0 002 2h2a2 2 0 002-2v-2a2 2 0 00-2-2H5zM11 5a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2h-2a2 2 0 01-2-2V5zM11 13a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2h-2a2 2 0 01-2-2v-2z"></path>
                                </svg>
                            </button>
                            <button id="list-view" class="p-2 bg-gray-700 text-white rounded-lg">
                                <svg class="w-5 h-5" fill="currentColor" viewBox="0 0 20 20">
                                    <path fill-rule="evenodd" d="M3 4a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1zm0 4a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1zm0 4a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1z" clip-rule="evenodd"></path>
                                </svg>
                            </button>
                        </div>
                    </div>
                    
                    <!-- Products Count -->
                    <div class="mb-6">
                        <p class="text-gray-300">共找到 <span id="products-count" class="text-blue-400 font-semibold">12</span> 个产品</p>
                    </div>
                    
                    <!-- Products Grid -->
                    <div id="products-container" class="grid grid-cols-1 md:grid-cols-2 xl:grid-cols-3 gap-8">
                        <!-- Product cards will be dynamically generated -->
                    </div>
                    
                    <!-- Load More Button -->
                    <div class="text-center mt-12">
                        <button id="load-more" class="bg-blue-500 hover:bg-blue-600 text-white px-8 py-3 rounded-lg font-semibold transition-all duration-300">
                            加载更多产品
                        </button>
                    </div>
                </div>
            </div>
        </div>
    </section>
    
    <!-- Compare Modal -->
    <div id="compare-modal" class="fixed inset-0 bg-black bg-opacity-50 z-50 hidden">
        <div class="flex items-center justify-center min-h-screen p-4">
            <div class="bg-gray-900 rounded-2xl max-w-6xl w-full max-h-screen overflow-hidden">
                <div class="flex items-center justify-between p-6 border-b border-gray-700">
                    <h3 class="text-2xl font-semibold text-white">产品对比</h3>
                    <button id="close-compare" class="text-gray-400 hover:text-white">
                        <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path>
                        </svg>
                    </button>
                </div>
                <div class="p-6">
                    <div id="compare-content" class="compare-table">
                        <!-- Compare content will be dynamically generated -->
                    </div>
                </div>
            </div>
        </div>
    </div>
    
    <!-- Cart Sidebar -->
    <div id="cart-overlay" class="fixed inset-0 bg-black bg-opacity-50 z-40 hidden"></div>
    <div id="cart-sidebar" class="fixed right-0 top-0 h-full w-96 bg-gray-900 transform translate-x-full transition-transform duration-300 z-50">
        <div class="flex items-center justify-between p-6 border-b border-gray-700">
            <h3 class="text-xl font-semibold text-white">购物车</h3>
            <button id="cart-close" class="text-gray-400 hover:text-white">
                <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path>
                </svg>
            </button>
        </div>
        <div id="cart-items" class="flex-1 overflow-y-auto">
            <div class="p-6 text-center text-gray-400">
                购物车为空
            </div>
        </div>
        <div class="p-6 border-t border-gray-700">
            <div class="flex items-center justify-between mb-4">
                <span class="text-white font-semibold">总计:</span>
                <span id="cart-total" class="text-blue-400 font-bold text-xl">¥0.00</span>
            </div>
            <button class="w-full bg-blue-500 hover:bg-blue-600 text-white py-3 rounded-lg font-semibold transition-all duration-300">
                立即结算
            </button>
        </div>
    </div>
    
    <!-- Compare Panel -->
    <div id="compare-panel" class="fixed bottom-0 left-0 right-0 bg-gray-900 border-t border-gray-700 p-4 hidden z-30">
        <div class="max-w-7xl mx-auto flex items-center justify-between">
            <div class="flex items-center space-x-4">
                <span class="text-white font-semibold">产品对比</span>
                <span id="compare-count" class="bg-blue-500 text-white px-2 py-1 rounded-full text-sm">0</span>
            </div>
            <div class="flex items-center space-x-4">
                <button id="view-compare" class="text-blue-400 hover:text-blue-300">查看对比</button>
                <button id="clear-compare" class="text-red-400 hover:text-red-300">清空</button>
            </div>
        </div>
    </div>
    
    <!-- Footer -->
    <footer class="bg-black py-12">
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
            <div class="text-center">
                <div class="flex items-center justify-center space-x-3 mb-6">
                    <div class="w-10 h-10 bg-gradient-to-br from-blue-400 to-blue-600 rounded-lg flex items-center justify-center glow-effect">
                        <span class="text-white font-bold text-lg">CB</span>
                    </div>
                    <span class="text-2xl font-bold gradient-text font-display">CYBERBEANS</span>
                </div>
                <p class="text-gray-400 mb-6">专业特斯拉配件品牌 - 创新科技，精工品质</p>
                <p class="text-gray-500 text-sm">© 2024 CYBERBEANS. 保留所有权利。</p>
            </div>
        </div>
    </footer>
    
    <!-- Scripts -->
    <script src="main.js"></script>
    <script>
        // Extended product data for products page
        const extendedProducts = [
            {
                id: 'cup-holder-pro',
                name: '智能杯架 Pro',
                price: 299,
                category: 'interior',
                model: ['model3', 'modely'],
                material: 'abs',
                image: 'resources/cup-holder-detail.jpg',
                description: '升级您的特斯拉杯架，智能温控，完美适配',
                rating: 4.8,
                reviews: 156,
                features: ['智能温控', 'LED照明', '防漏设计', '易安装']
            },
            {
                id: 'air-filter-max',
                name: '高效空调滤芯 Max',
                price: 199,
                category: 'filter',
                model: ['model3', 'modely', 'models', 'modelx'],
                material: 'abs',
                image: 'resources/air-filter-technology.jpg',
                description: '三层过滤技术，99.9%过滤效率',
                rating: 4.9,
                reviews: 89,
                features: ['三层过滤', '99.9%效率', '长效使用', '原厂规格']
            },
            {
                id: 'mud-flap-sport',
                name: '运动挡泥板套装',
                price: 399,
                category: 'exterior',
                model: ['model3', 'modely'],
                material: 'carbon',
                image: 'resources/tesla-model-y-accessories.jpg',
                description: '碳纤维纹理，完美贴合车身曲线',
                rating: 4.7,
                reviews: 234,
                features: ['碳纤维纹理', '防腐蚀', '易清洁', '无损安装']
            },
            {
                id: 'floor-mat-premium',
                name: '全包围脚垫 Premium',
                price: 599,
                category: 'interior',
                model: ['model3', 'modely', 'models', 'modelx'],
                material: 'tpe',
                image: 'resources/product-showcase.jpg',
                description: 'TPE材质，防水防滑，易清洁',
                rating: 4.8,
                reviews: 167,
                features: ['TPE材质', '防水防滑', '全包围设计', '环保无味']
            },
            {
                id: 'center-console-organizer',
                name: '中控台收纳盒',
                price: 159,
                category: 'interior',
                model: ['model3', 'modely'],
                material: 'abs',
                image: 'resources/hero-tesla-interior.jpg',
                description: '合理利用空间，分类收纳更整洁',
                rating: 4.6,
                reviews: 98,
                features: ['空间优化', '分类收纳', '防滑设计', '一键安装']
            },
            {
                id: 'wireless-charger-pad',
                name: '无线充电板',
                price: 349,
                category: 'interior',
                model: ['model3', 'modely'],
                material: 'aluminum',
                image: 'resources/cup-holder-detail.jpg',
                description: '15W快充，双设备同时充电',
                rating: 4.5,
                reviews: 76,
                features: ['15W快充', '双设备充电', '智能识别', '过热保护']
            },
            {
                id: 'door-sill-protector',
                name: '门槛条保护板',
                price: 229,
                category: 'exterior',
                model: ['model3', 'modely', 'models', 'modelx'],
                material: 'carbon',
                image: 'resources/tesla-model-y-accessories.jpg',
                description: '碳纤维材质，防刮耐磨',
                rating: 4.4,
                reviews: 134,
                features: ['碳纤维材质', '防刮耐磨', '3M背胶', '定制贴合']
            },
            {
                id: 'trunk-organizer',
                name: '后备箱整理箱',
                price: 449,
                category: 'interior',
                model: ['model3', 'modely'],
                material: 'abs',
                image: 'resources/product-showcase.jpg',
                description: '折叠设计，大容量收纳',
                rating: 4.7,
                reviews: 89,
                features: ['折叠设计', '大容量', '防水材质', '防滑底部']
            },
            {
                id: 'window-sunshade',
                name: '车窗遮阳帘',
                price: 279,
                category: 'exterior',
                model: ['model3', 'modely'],
                material: 'abs',
                image: 'resources/hero-tesla-interior.jpg',
                description: '磁吸安装，有效隔热',
                rating: 4.3,
                reviews: 112,
                features: ['磁吸安装', '有效隔热', '隐私保护', '无损安装']
            },
            {
                id: 'performance-pedals',
                name: '运动踏板套装',
                price: 329,
                category: 'interior',
                model: ['model3', 'modely'],
                material: 'aluminum',
                image: 'resources/cup-holder-detail.jpg',
                description: '铝合金材质，防滑设计',
                rating: 4.6,
                reviews: 67,
                features: ['铝合金材质', '防滑设计', '增强驾驶感受', '易安装']
            },
            {
                id: 'charging-cable-organizer',
                name: '充电线收纳器',
                price: 89,
                category: 'interior',
                model: ['model3', 'modely', 'models', 'modelx'],
                material: 'abs',
                image: 'resources/air-filter-technology.jpg',
                description: '整洁收纳，防止缠绕',
                rating: 4.2,
                reviews: 156,
                features: ['整洁收纳', '防缠绕', '壁挂设计', '耐用材质']
            },
            {
                id: 'aero-wheel-cap',
                name: '轮毂盖套装',
                price: 189,
                category: 'exterior',
                model: ['model3', 'modely'],
                material: 'abs',
                image: 'resources/tesla-model-y-accessories.jpg',
                description: '提升续航，美观实用',
                rating: 4.5,
                reviews: 203,
                features: ['提升续航', '美观实用', '快速安装', '耐用材质']
            }
        ];
        
        // Initialize products page
        document.addEventListener('DOMContentLoaded', function() {
            // Initialize with extended products
            window.extendedProducts = extendedProducts;
            
            // Render products
            renderProducts(extendedProducts);
            
            // Initialize filters
            initProductFilters();
            
            // Initialize compare functionality
            initCompareFunctionality();
            
            // Initialize view toggles
            initViewToggles();
        });
        
        function renderProducts(products) {
            const container = document.getElementById('products-container');
            const countElement = document.getElementById('products-count');
            
            countElement.textContent = products.length;
            
            container.innerHTML = products.map(product => `
                <div class="product-card card-hover bg-gray-800 rounded-2xl overflow-hidden" data-category="${product.category}" data-model="${product.model.join(' ')}" data-material="${product.material}" data-price="${product.price}">
                    <div class="relative">
                        <img src="${product.image}" alt="${product.name}" class="w-full h-48 object-cover">
                        <div class="absolute top-4 right-4">
                            <button class="compare-btn bg-black bg-opacity-50 text-white p-2 rounded-lg hover:bg-opacity-70 transition-all" data-product-id="${product.id}" data-product-name="${product.name}">
                                <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z"></path>
                                </svg>
                            </button>
                        </div>
                        <div class="absolute top-4 left-4">
                            <span class="bg-blue-500 text-white px-2 py-1 rounded-full text-xs font-semibold">${getCategoryName(product.category)}</span>
                        </div>
                    </div>
                    <div class="p-6">
                        <h3 class="text-xl font-semibold mb-2">${product.name}</h3>
                        <p class="text-gray-400 text-sm mb-4">${product.description}</p>
                        
                        <!-- Features -->
                        <div class="flex flex-wrap gap-2 mb-4">
                            ${product.features.map(feature => `
                                <span class="bg-gray-700 text-gray-300 px-2 py-1 rounded-lg text-xs">${feature}</span>
                            `).join('')}
                        </div>
                        
                        <div class="flex items-center mb-4">
                            <div class="flex text-yellow-400">
                                ${'★'.repeat(Math.floor(product.rating))}${'☆'.repeat(5 - Math.floor(product.rating))}
                            </div>
                            <span class="text-gray-400 text-sm ml-2">(${product.reviews})</span>
                        </div>
                        
                        <div class="flex items-center justify-between">
                            <span class="text-2xl font-bold text-blue-400">¥${product.price}</span>
                            <button class="add-to-cart bg-blue-500 hover:bg-blue-600 text-white px-4 py-2 rounded-lg transition-all duration-300" data-product-id="${product.id}">
                                加入购物车
                            </button>
                        </div>
                    </div>
                </div>
            `).join('');
            
            // Animate product cards
            anime({
                targets: '.product-card',
                opacity: [0, 1],
                translateY: [30, 0],
                duration: 600,
                delay: anime.stagger(100),
                easing: 'easeOutQuart'
            });
            
            // Re-initialize add to cart buttons
            setTimeout(() => {
                document.querySelectorAll('.add-to-cart').forEach(button => {
                    button.addEventListener('click', (e) => {
                        const productId = e.target.dataset.productId;
                        const product = extendedProducts.find(p => p.id === productId);
                        if (product && window.app) {
                            window.app.addToCart(product);
                        }
                    });
                });
            }, 100);
        }
        
        function getCategoryName(category) {
            const names = {
                'interior': '内饰',
                'filter': '滤芯',
                'exterior': '外观'
            };
            return names[category] || category;
        }
        
        function initProductFilters() {
            const categoryFilters = document.querySelectorAll('.category-filter');
            const modelFilters = document.querySelectorAll('.model-filter');
            const materialFilters = document.querySelectorAll('.material-filter');
            const priceRange = document.getElementById('price-range');
            const priceValue = document.getElementById('price-value');
            const sortSelect = document.getElementById('sort-select');
            const resetButton = document.getElementById('reset-filters');
            
            // Price range slider
            priceRange.addEventListener('input', function() {
                priceValue.textContent = `¥${this.value}`;
                applyFilters();
            });
            
            // Category filters
            categoryFilters.forEach(filter => {
                filter.addEventListener('change', applyFilters);
            });
            
            // Model filters
            modelFilters.forEach(filter => {
                filter.addEventListener('change', applyFilters);
            });
            
            // Material filters
            materialFilters.forEach(filter => {
                filter.addEventListener('change', applyFilters);
            });
            
            // Sort select
            sortSelect.addEventListener('change', applyFilters);
            
            // Reset button
            resetButton.addEventListener('click', function() {
                categoryFilters.forEach(filter => {
                    filter.checked = filter.value === 'all';
                });
                modelFilters.forEach(filter => {
                    filter.checked = false;
                });
                materialFilters.forEach(filter => {
                    filter.checked = false;
                });
                priceRange.value = 500;
                priceValue.textContent = '¥500';
                sortSelect.value = 'default';
                applyFilters();
            });
        }
        
        function applyFilters() {
            let filteredProducts = [...extendedProducts];
            
            // Category filter
            const selectedCategories = Array.from(document.querySelectorAll('.category-filter:checked')).map(cb => cb.value);
            if (!selectedCategories.includes('all') && selectedCategories.length > 0) {
                filteredProducts = filteredProducts.filter(product => selectedCategories.includes(product.category));
            }
            
            // Model filter
            const selectedModels = Array.from(document.querySelectorAll('.model-filter:checked')).map(cb => cb.value);
            if (selectedModels.length > 0) {
                filteredProducts = filteredProducts.filter(product => 
                    product.model.some(model => selectedModels.includes(model))
                );
            }
            
            // Material filter
            const selectedMaterials = Array.from(document.querySelectorAll('.material-filter:checked')).map(cb => cb.value);
            if (selectedMaterials.length > 0) {
                filteredProducts = filteredProducts.filter(product => selectedMaterials.includes(product.material));
            }
            
            // Price filter
            const maxPrice = parseInt(document.getElementById('price-range').value);
            filteredProducts = filteredProducts.filter(product => product.price <= maxPrice);
            
            // Sort products
            const sortValue = document.getElementById('sort-select').value;
            switch(sortValue) {
                case 'price-low':
                    filteredProducts.sort((a, b) => a.price - b.price);
                    break;
                case 'price-high':
                    filteredProducts.sort((a, b) => b.price - a.price);
                    break;
                case 'rating':
                    filteredProducts.sort((a, b) => b.rating - a.rating);
                    break;
                case 'newest':
                    // Reverse order for newest (assuming array order represents newness)
                    filteredProducts.reverse();
                    break;
            }
            
            renderProducts(filteredProducts);
        }
        
        function initCompareFunctionality() {
            const compareButtons = document.querySelectorAll('.compare-btn');
            const comparePanel = document.getElementById('compare-panel');
            const compareCount = document.getElementById('compare-count');
            const viewCompareBtn = document.getElementById('view-compare');
            const clearCompareBtn = document.getElementById('clear-compare');
            const compareModal = document.getElementById('compare-modal');
            const closeCompareBtn = document.getElementById('close-compare');
            
            let compareList = [];
            
            compareButtons.forEach(button => {
                button.addEventListener('click', function() {
                    const productId = this.dataset.productId;
                    const productName = this.dataset.productName;
                    
                    if (compareList.length < 3 && !compareList.find(item => item.id === productId)) {
                        compareList.push({
                            id: productId,
                            name: productName
                        });
                        updateCompareUI();
                    }
                });
            });
            
            function updateCompareUI() {
                compareCount.textContent = compareList.length;
                
                if (compareList.length > 0) {
                    comparePanel.classList.remove('hidden');
                } else {
                    comparePanel.classList.add('hidden');
                }
            }
            
            viewCompareBtn.addEventListener('click', function() {
                if (compareList.length > 0) {
                    showCompareModal();
                }
            });
            
            clearCompareBtn.addEventListener('click', function() {
                compareList = [];
                updateCompareUI();
            });
            
            closeCompareBtn.addEventListener('click', function() {
                compareModal.classList.add('hidden');
            });
            
            function showCompareModal() {
                const compareContent = document.getElementById('compare-content');
                const productsToCompare = extendedProducts.filter(p => compareList.some(c => c.id === p.id));
                
                if (productsToCompare.length > 0) {
                    compareContent.innerHTML = generateCompareTable(productsToCompare);
                    compareModal.classList.remove('hidden');
                }
            }
            
            function generateCompareTable(products) {
                return `
                    <div class="overflow-x-auto">
                        <table class="w-full text-left">
                            <thead>
                                <tr class="border-b border-gray-700">
                                    <th class="p-4 text-white font-semibold">对比项目</th>
                                    ${products.map(product => `
                                        <th class="p-4 text-center">
                                            <img src="${product.image}" alt="${product.name}" class="w-20 h-20 object-cover rounded-lg mx-auto mb-2">
                                            <div class="text-white font-semibold">${product.name}</div>
                                            <div class="text-blue-400 font-bold">¥${product.price}</div>
                                        </th>
                                    `).join('')}
                                </tr>
                            </thead>
                            <tbody>
                                <tr class="border-b border-gray-700">
                                    <td class="p-4 text-gray-300 font-medium">评分</td>
                                    ${products.map(product => `
                                        <td class="p-4 text-center">
                                            <div class="flex justify-center text-yellow-400 mb-1">
                                                ${'★'.repeat(Math.floor(product.rating))}${'☆'.repeat(5 - Math.floor(product.rating))}
                                            </div>
                                            <div class="text-gray-400 text-sm">${product.rating} (${product.reviews}条评价)</div>
                                        </td>
                                    `).join('')}
                                </tr>
                                <tr class="border-b border-gray-700">
                                    <td class="p-4 text-gray-300 font-medium">产品类别</td>
                                    ${products.map(product => `
                                        <td class="p-4 text-center text-gray-300">${getCategoryName(product.category)}</td>
                                    `).join('')}
                                </tr>
                                <tr class="border-b border-gray-700">
                                    <td class="p-4 text-gray-300 font-medium">适配车型</td>
                                    ${products.map(product => `
                                        <td class="p-4 text-center text-gray-300">${product.model.map(m => m.toUpperCase()).join(', ')}</td>
                                    `).join('')}
                                </tr>
                                <tr class="border-b border-gray-700">
                                    <td class="p-4 text-gray-300 font-medium">材质</td>
                                    ${products.map(product => `
                                        <td class="p-4 text-center text-gray-300">${getMaterialName(product.material)}</td>
                                    `).join('')}
                                </tr>
                                <tr>
                                    <td class="p-4 text-gray-300 font-medium">特色功能</td>
                                    ${products.map(product => `
                                        <td class="p-4 text-center">
                                            <div class="flex flex-wrap gap-1 justify-center">
                                                ${product.features.map(feature => `
                                                    <span class="bg-gray-700 text-gray-300 px-2 py-1 rounded text-xs">${feature}</span>
                                                `).join('')}
                                            </div>
                                        </td>
                                    `).join('')}
                                </tr>
                            </tbody>
                        </table>
                    </div>
                `;
            }
            
            function getMaterialName(material) {
                const names = {
                    'tpe': 'TPE材质',
                    'carbon': '碳纤维',
                    'abs': 'ABS塑料',
                    'aluminum': '铝合金'
                };
                return names[material] || material;
            }
        }
        
        function initViewToggles() {
            const gridViewBtn = document.getElementById('grid-view');
            const listViewBtn = document.getElementById('list-view');
            const productsContainer = document.getElementById('products-container');
            
            gridViewBtn.addEventListener('click', function() {
                gridViewBtn.classList.add('bg-blue-500');
                gridViewBtn.classList.remove('bg-gray-700');
                listViewBtn.classList.add('bg-gray-700');
                listViewBtn.classList.remove('bg-blue-500');
                
                productsContainer.className = 'grid grid-cols-1 md:grid-cols-2 xl:grid-cols-3 gap-8';
            });
            
            listViewBtn.addEventListener('click', function() {
                listViewBtn.classList.add('bg-blue-500');
                listViewBtn.classList.remove('bg-gray-700');
                gridViewBtn.classList.add('bg-gray-700');
                gridViewBtn.classList.remove('bg-blue-500');
                
                productsContainer.className = 'grid grid-cols-1 gap-4';
            });
        }
    </script>
</body>
</html>